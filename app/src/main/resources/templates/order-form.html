<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>

    <title th:text="${order.id != null ? 'Edit Order' : 'Add Order'}"></title>
    <link th:href="@{/css/style.css}" rel="stylesheet" type="text/css">

</head>

<body>

    <nav class="navbar">
        <div class="navbar-left">
            <span th:text="${order.id != null ? 'Edit Order' : 'Add Order'}"></span>
        </div>
        <div class="navbar-right">
            <a th:href="@{/}">Home</a>
            <a th:href="@{/products}">Products</a>
            <a th:href="@{/users}">Users</a>
            <a th:href="@{/orders}">Orders</a>
        </div>
    </nav>
    <div class="page-data">
        <h1 th:text="${order.id != null ? 'Edit Order' : 'Add Order'}"></h1>

        <form th:action="@{${order.id != null} ? '/orders/edit/' + ${order.id} : '/orders/add'}" th:object="${order}"
            method="post">

            <label>User</label>
            <select th:field="*{user.id}" required>
                <option value="" disabled selected>Select user</option>
                <option th:each="u : ${users}" th:value="${u.id}" th:text="${u.name}"></option>
            </select>

            <label>Order Date</label>
            <input type="datetime-local" th:field="*{orderDate}" />

            <label>Total</label>
            <input type="number" step="0.01" th:field="*{total}" placeholder="Enter total" />

            <label>Status</label>
            <input type="text" th:field="*{status}" placeholder="Enter status (e.g., Pending, Shipped)" />

            <label>Product Names (comma separated)</label>
            <input type="text" th:value="${#strings.listJoin(order.productNames, ', ')}" name="productNamesString"
                placeholder="Product1, Product2" />

            <button type="submit" th:text="${order.id != null ? 'Update' : 'Add'}"></button>
        </form>

        <a href="/orders">‚Üê Back to Orders</a>
    </div>
</body>

</html>